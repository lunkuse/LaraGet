steps:
  - checkout: self
    submodules: true
    clean: true    
  - task: Docker@2
    displayName: Build
    inputs:
      command: build
      repository: $(imageRepository)
      dockerfile: docker/$(dockerFile)
      containerRegistry: $(dockerRegistryServiceConnection)
      arguments: "--build-arg PAT=$(PAT) --build-arg BuildConfiguration=$(BuildConfiguration) --build-arg BuildNumber=$(Build.BuildNumber)"
      buildContext: $(Build.SourcesDirectory)
      tags: |
        $(tagBuildId)
        $(tagBuildNumber)
